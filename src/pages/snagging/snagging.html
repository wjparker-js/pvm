<ion-header >  
  <ion-toolbar [hidden]="!this.online"> 
    <button ion-button menuToggle start><ion-icon name="menu"></ion-icon></button>       
    <span style="font-size:16px;color:white;">{{selectedProjectName}} New Defect</span> 
    <ion-buttons end>
      <button ion-button style="font-size:24px;" (click)="dismiss()"><ion-icon name="close"></ion-icon></button>
    </ion-buttons>
  </ion-toolbar>

  <ion-toolbar  [hidden]="this.online" color="bold"> 
    <button ion-button menuToggle start><ion-icon name="menu"></ion-icon></button>       
    <span style="font-size:16px;color:white;">{{selectedProjectName}} New Defect</span> 
    <ion-buttons end>
      <button ion-button style="font-size:24px;" (click)="dismiss()"><ion-icon name="close"></ion-icon></button>
    </ion-buttons>
  </ion-toolbar>  
</ion-header>

<ion-content padding>
  <ion-list>
    
  <ion-item>
    <ion-label class="mylabel" style="font-size:13px;font-weight:bold !important;" >Reference</ion-label>
    <ion-input class="mytext" type="text"  id = "reference" name="reference" [(ngModel)]="frmData.reference" style="font-size:13px;"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label class="mylabel"  style="font-size:13px;font-weight:bold !important;">Defect Type</ion-label>
      <ion-input class="text" readonly type="text" id = "Defecttype" name="defecttype" value="{{defecttype}}" style="font-size:13px;"></ion-input>  
      <button ion-button color="light" type="button" item-right (click)="openDTList()"> 
        <ion-icon name="list"> </ion-icon> 
      </button>       
  </ion-item>

  <ion-item  [hidden]="defecttype == '' || defecttype == undefined ">
      <ion-label class="mylabel"  style="font-size:13px;font-weight:bold !important;">Discipline</ion-label>
        <ion-input class="text" readonly type="text" id = "Discipline" name="discipline" value="{{discipline}}" style="font-size:13px;"></ion-input>  
        <button ion-button  [hidden]="snagid !== 'new'" color="light" type="button" item-right (click)="openDList(defecttype)"> 
          <ion-icon name="list"> </ion-icon> 
        </button>          
  </ion-item>

	<ion-item>
    <ion-label class="mylabel"  style="font-size:13px;font-weight:bold !important;">Location</ion-label>
    
      <ion-input class="text" readonly type="text"   id = "Location" name="location" value="{{name}}" (ionChange)="openlocimg()" style="font-size:13px;"></ion-input>
	
      <button ion-button  [hidden]="snagid !== 'new'" color="light" type="button" item-right (click)="scanQRCode()" > 
      	<ion-icon name="qr-scanner"> </ion-icon> 
      </button>    
      <button ion-button  [hidden]="snagid !== 'new'" color="light" type="button" item-right (click)="openList()"> 
      	<ion-icon name="list"> </ion-icon> 
      </button>   
  </ion-item>
  
  <ion-item>
    <ion-label class="mylabel"  style="font-size:13px;font-weight:bold !important;">Reason</ion-label>
      <ion-input class="text" readonly type="text" id = "Reason" name="reason" value="{{reason}}" style="font-size:13px;"></ion-input>  
      <button ion-button  [hidden]="snagid !== 'new'" color="light" type="button" item-right (click)="openRList()"> 
        <ion-icon name="list"> </ion-icon> 
      </button>          
  </ion-item>

  <ion-item>
    <ion-label class="mylabel"  style="font-size:13px;font-weight:bold !important;">Effect</ion-label>
      <ion-input class="text" readonly type="text" id = "Effect" name="effect" value="{{effect}}" style="font-size:13px;"></ion-input>  
      <button ion-button  [hidden]="snagid !== 'new'" color="light" type="button" item-right (click)="openEList()"> 
        <ion-icon name="list"> </ion-icon> 
      </button>          
  </ion-item>  


  <ion-item>
    <ion-label class="mylabel" style="font-size:13px;font-weight:bold !important;">Sticker Code</ion-label>    
      <ion-input class="text" readonly type="text"   id = "Location" name="location" value="{{associatedcode}}"  style="font-size:13px;"></ion-input>	
      <button ion-button  [hidden]="snagid !== 'new'" color="light" type="button" item-right (click)="associateQRCode()" > 
      	<ion-icon name="qr-scanner"> </ion-icon> 
      </button>    
  </ion-item>

  <ion-item>
    <ion-label class="mylabel"  style="font-size:13px;font-weight:bold !important;">Add Document</ion-label>
      <!--
         <ion-input class="text" readonly type="text" id = "adddoc" name="adddoc" value="{{adddoc1}}" style="font-size:13px;"></ion-input>  
      -->
      <button ion-button  [hidden]="snagid !== 'new'" color="light" type="button" item-right (click)="openDocs()"> 
        <ion-icon name="list"> </ion-icon> 
      </button>          
  </ion-item>  

  <div id="maindiv">
    <div *ngIf="this.hasdocs" >
      <ion-grid>
        <ion-row>
          <ion-col  *ngFor="let document of userdocuments"  style="margin-top:8px;padding-top: 0px;padding-bottom: 0px;margin-left:0px;margin-right:0px;height: 80px;"  col-12 col-md-6 col-lg-4 col-xl-3>
            <ion-list>
              <ion-card style="width: 108%;display: flex;align-items: center; justify-content: center;border-top-color:white;border-bottom-color:white;margin:0px;margin-top:6px;padding:0px;" >                     
                <ion-item-sliding >              
                  <ion-item padding  style="padding-left:5px;margin:0px;width:100%;height:90px;border-bottom-color:white;" class="card card-md" class="item item-block item-md">                  
                    <ion-thumbnail item-left no-padding style="margin-left:5px;margin-top:0px;">
                      <img 
                        src="{{this.document.PhotoTiny}}" 
                        style="position:relative;top:-5px;height:56px !Important;width:80px !Important;border: 1px solid #000;" 
                        imageViewer
                      />
                    </ion-thumbnail>    
                    <div style="position:relative;top:-5px;padding:0px;margin:5px;width:100%;">                    
                        <ion-icon style = "font-size: 18px; position:relative;top:1px;color:darkgoldenrod" name="folder" >
                          <b> <span style="font-size: 13px;color:black;font-family:arial;">{{this.document.FolderName}}</span></b>
                        </ion-icon>                         
                        <div  style="font-size: 13px;">{{this.document.DocumentNumber}} / {{this.document.Rev}}</div>  
                        <div  style="font-size: 13px;">{{this.document.Title}}</div> 
                    </div>                  
                  </ion-item> 
                  <ion-item-options side="right">
                    <button ion-button color="bold" (click)="removedoc(document.DocumentID)">Remove</button>
                  </ion-item-options>    
              </ion-item-sliding> 
            </ion-card>

            </ion-list>
          </ion-col> 
        </ion-row>
      </ion-grid>
    </div>
  </div>
        




  <ion-item>
      <ion-label class="mylabel" style="font-size:13px;font-weight:bold !important;" >Details</ion-label>
      <ion-textarea class="mytext" rows="3"  name="details" [(ngModel)]="frmData.details" placeholder="Enter detailled snag information here..."  style="font-size:13px;"></ion-textarea>
  </ion-item>

  <ion-card  [hidden]="image === null" style="margin-top: 0px;padding-bottom: 0px;margin-bottom: 0px;">
    <ion-card-content>       
      <ion-item style="padding-left:3px;padding-left:3px;height: 70px;">   

          <ion-thumbnail item-left  style="padding-left:3px;padding-right: 6px;width: 90px !Important;height: 90px !Important;margin-top: 0px;margin-bottom: 0px;">
            <img src="{{image}}" style="width: 90px; margin: 0; position: absolute;top: 50%;left: 0px;transform: translate(0%, -50%);" >
          </ion-thumbnail> 

          <span>
            <button style="width:100%;height:100%;" ion-button (click)="editloc()">
              <span><br/><br/>Edit Location<br/><br/><br/></span>
            </button>
          </span>        
      </ion-item>  
    </ion-card-content>   
  </ion-card> 

  
  <ion-card  [hidden]="image === null" style="margin-top: 0px;padding-bottom: 0px;margin-bottom: 0px;">
    <ion-card-content>       
      <ion-item style="padding-left:3px;padding-left:3px;height: 70px;">     

        <ion-thumbnail item-left  style="padding-left:3px;padding-right: 6px;width: 90px !Important;height: 90px !Important;margin-top: 0px;margin-bottom: 0px;">
          <img [src]="this.currentImage" style="width: 90px; margin: 0; position: absolute;top: 50%;left: 0px;transform: translate(0%, -50%);" >
        </ion-thumbnail>  

        <span>
            <div> 
                <ion-row [hidden]="currentImage === null"  >
                  <ion-col style="width:50%;padding-left:0px;">
                    <div style="width:100%;">  
                      <button  start style="width:100%;height:100%;margin-left:0px;" ion-button (click)="addimage('add')">
                        <br/>Take<br>Defect<br>Picture<br/><br/>
                      </button>
                    </div> 
                  </ion-col>
                  <ion-col style="width:50%;padding-right:0px;">
                    <div style="width:100%;">  
                      <button  end style="width:100%;height:100%;margin-right:0px;" ion-button (click)="addimage('edit')">
                        <br/>Edit<br>Defect<br>Picture<br/><br/>
                      </button> 
                    </div> 
                  </ion-col>
                </ion-row>
            </div>
        </span>    

      </ion-item>  
    </ion-card-content>
  </ion-card> 


</ion-list>

</ion-content>



<ion-footer  >
  <div>
    <ion-buttons >
      <button full ion-button icon-left (click)="sendUploadData()" >   <!--[disabled]="showUpload === null"--> 
        <ion-icon name="cloud-upload"></ion-icon>Upload Defect Image
      </button>
    </ion-buttons>
  </div>
  <br>
</ion-footer>
  
