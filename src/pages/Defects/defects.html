<ion-header>
  <ion-navbar>       
    <ion-buttons left style='margin-left: 0px;margin-right: 0px;'>
        <button ion-button menuToggle start style='margin-left:6px'>
            <ion-icon name="menu"></ion-icon>
        </button>
    </ion-buttons>
    <span style="font-size:16px;color:white;padding-left:15px;">{{selectedProjectName}}</span> 
    
    
    <ion-buttons right>
        <button ion-button  color="light" type="button" item-right (click)="openLocationQRCode()"> 
         <h2> <b><ion-icon name="qr-scanner"> </ion-icon></b> </h2>
        </button>  
        &nbsp;
        <button ion-button  strong color="light" type="button" item-right (click)="newSnag('new')"> 
         <h2> <b><ion-icon strong name="add"> </ion-icon></b> </h2>
        </button>  
    </ion-buttons>

 </ion-navbar>   
    
 <div> 
  <ion-searchbar
  #myDefectsSearchbar 
  name = "defectsSearchBar" 
  value= "" 
  placeholder="Defect Search..." 
  (ionInput)="searchDefectsByKeyword($event)" 
  [debounce]="500" 
  class="android"  >
  </ion-searchbar> 
 </div> 



<div style='padding: 10px;'>   
  <ion-segment color="primary"  mode='ios' [(ngModel)]="defectslist" (ionChange)="segmentChanged(defectslist)">
    <ion-segment-button selected value="all">
      Issued
    </ion-segment-button>
    <ion-segment-button value="new">
      Scheduled
    </ion-segment-button>
    <ion-segment-button value="open">
      Reinspect
    </ion-segment-button>
  </ion-segment>
</div>

</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col  *ngFor="let defect of defects" col-12 col-md-6 col-lg-4 col-xl-3 style="padding-top: 0px;padding-bottom: 0px;">
       
        <ion-list style="margin: 0px; padding-left:3px;padding-right:3px;">
        <ion-card style=" padding-bottom: 0px; margin-bottom: 0px;margin-top: 1px;"> <!--margin-left: 2px;margin-right: 2px;-->
          <ion-item (click)="openSnag(defect.SytemOrderNumber,defect.OrderStatus)" style="padding-left:3px;">            
            <ion-thumbnail item-left  style="padding-left:3px;padding-right: 6px;width: 100px !Important;height: 71px !Important;margin-top: 10px;margin-bottom: 0px;">
              <img src="{{'data:image/jpeg;base64,' +  this.hexToBase64(defect.LocationImage)}}" border="1" style="width:100px;height:71px;border-color:black;border:2px;"/>
            </ion-thumbnail> 
            <div id="defectdetails">
              <b>{{defect.OrderReference}}</b><br>
              <span *ngIf="defect.statustext">{{defect.statustext}}<br></span>
              <span *ngIf="defect.name">{{defect.name}}<br></span>
              {{defect.OrderSubject}}<br>
              <span text-wrap>{{defect.SpecialInstructions}}<br></span>           
              <span  text-wrap>              
                <span *ngIf="defect.DateIsssued">Issued:&nbsp;{{defect.DateIsssued  | date : 'dd MMM yyyy' }}&nbsp;&nbsp;&nbsp;&nbsp;</span>
                <span *ngIf="defect.ProposedDate">Scheduled:&nbsp;{{defect.ProposedDate  | date : 'dd MMM yyyy' }}&nbsp;&nbsp;&nbsp;&nbsp;</span>
                <span *ngIf="defect.DeliverBy">Required:&nbsp;{{defect.DeliverBy  | date : 'dd MMM yyyy' }}&nbsp;&nbsp;&nbsp;&nbsp;</span>
              </span>   
            </div>         
          </ion-item>
          </ion-card>
        </ion-list>

      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
  
<style>
  .social-cards ion-col {
    padding: 0;
  }
</style>