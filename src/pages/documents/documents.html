<ion-header>
  <ion-navbar>       
    <ion-buttons left style='margin-left: 0px;margin-right: 0px;'>
        <button ion-button menuToggle start style='margin-left:6px'>
            <ion-icon name="menu"></ion-icon>
        </button>
    </ion-buttons>

    <span style="font-size:16px;color:white;">{{this.userdocumentData.SystemProjectName}}</span>    
    
    <ion-buttons right>        
        <button ion-button  color="light" type="button" item-right style="font-size:24px;" (click)="scanDocQRCode()"> 
        <ion-icon name="qr-scanner"> </ion-icon>
        </button>  
        &nbsp;
    </ion-buttons>
  </ion-navbar> 
  <div>
    <ion-searchbar
      #mySearchbar 
      name = "searchBar" 
      value= "" 
      showCancelButton = "always" 
      placeholder="Document Search..."
      (ionInput)="searchByKeyword($event)" 
      (ionCancel)="onSearchCancel($event)" 
      (ionFocus)="checkFocus($event)"
      (ionBlur)="checkBlur($event)"
      [debounce]="1000"
      class="android">
    </ion-searchbar>
  </div>

</ion-header>

<ion-content>
 <div id="maindiv">
    <div *ngIf="this.hasdocs; else nodocs" >
      <ion-grid>
        <ion-row>
          <ion-col  *ngFor="let document of userdocuments"  style="margin-top:8px;padding-top: 0px;padding-bottom: 0px;margin-left:0px;margin-right:0px;height: 80px;"  col-12 col-md-6 col-lg-4 col-xl-3>
            <ion-list >
              <ion-item style="width: 99%;display: flex;align-items: center; justify-content: center;border-bottom-color:white;padding-left:0px;padding-right: 0px;height:90px;">                
                <ion-card *ngIf="document.Latest == 'Current' || document.Current == 'Current'" style="width: 108%;display: flex;align-items: center; justify-content: center;border-bottom-color:white;margin:0px;margin-top:6px;padding:0px;" >                     
                  <ion-item padding style="padding-left:5px;margin:0px;width:100%;height:90px;border-bottom-color:white;" class="card card-md" class="item item-block item-md">
                
                    <ion-thumbnail *ngIf="document.FileExtension == '.jpg' || document.FileExtension == '.jpeg' || document.FileExtension == '.png' || document.FileExtension == '.tif' || document.FileExtension == '.tiff' || document.FileExtension == '.gif' || document.FileExtension == '.bmp'" item-left no-padding style="margin-left:5px;margin-top:20px;">
                      <img 
                        src="{{document.PhotoTiny}}" style="border: 1px solid #000;position:relative;top:-10px;height:70px;width:100px;border: 2px solid #000;" 
                        style="border: 1px solid #000;position:relative;left:-5px;top:-10px;height:70px;width:100px;"
                        imageViewer
                        />
                    </ion-thumbnail>          

                    <ion-thumbnail *ngIf="document.FileExtension != '.jpg' && document.FileExtension != '.jpeg' && document.FileExtension != '.png' && document.FileExtension != '.tif' && document.FileExtension != '.tiff' && document.FileExtension != '.gif' && document.FileExtension != '.bmp'" item-left no-padding style="margin-left:5px;margin-top:20px;" >
                      <img 
                        src="{{document.PhotoTiny}}" style="border: 1px solid #000;position:relative;top:-10px;height:100px;left:10px;width:70px;transform: rotate(90deg);margin-right:30px;" 
                        (click)= "openDocument(userdocumentData.SystemClientID,userdocumentData.SystemProjectID,document.DocumentID,document.FileExtension)"
                        />
                    </ion-thumbnail> 

                    <div style="padding:0px;margin:0px;width:100%;margin-top:2px;">
                      
                        <ion-icon style = "font-size: 15px; position:relative;top:0px;" name="folder" class="flex-left hilite" >
                          <b> <span style="font-size: 11px;color:black;font-family:arial;top:-1px;" [innerHtml]="document.FolderName "></span></b>
                        </ion-icon>                         
                        <div style="font-size: 10px;top:0px" [innerHtml]="document.DNREV"></div>  
                        <div style="font-size: 11px;top:-3px;" [innerHtml]="document.Title"></div> 

                    </div> 

                    <div style="position:relative;top:-5px;padding:0px;margin:0px;width:100%;">
                                            
                        <ion-icon style = "font-size: 13px; padding-top: 0px;" name="refresh-circle"  class="flex-right hilite1" (click)="openDocumentInfo(document.PhotoTiny,document.DocumentID,document.DocumentNumber)"></ion-icon>
                        <label class="bodytext" color="primary" (click)="openDocumentInfo(document.PhotoTiny,document.DocumentID,document.DocumentNumber,dsearch)">Details</label>&nbsp;&nbsp;
                        
                        <ion-icon style = "font-size: 13px;padding-top: 0px;" name="information-circle"  class="flex-right hilite2" (click)="openDocumentAudit(document.PhotoTiny,document.DocumentID,document.DocumentNumber,document.SystemClientID)"></ion-icon>
                        <label class="bodytext" color="primary" (click)="openDocumentAudit(document.PhotoTiny,document.DocumentID,document.DocumentNumber,document.SystemClientID)">Audit</label>&nbsp;&nbsp;
                        
                        <ion-icon style = "font-size: 13px;padding-top: 8px;" name="mail" color="secondary" class="flex-right" (click)="openDocumentSend(document.PhotoTiny,document.DocumentID,document.DocumentNumber,document.SystemClientID)"></ion-icon>
                        <label class="bodytext" color="primary" (click)="openDocumentSend(document.PhotoTiny,document.DocumentID,document.DocumentNumber,document.SystemClientID)">Send</label>
                      
                    </div>

                  </ion-item>          
                </ion-card>
              </ion-item>
            </ion-list>
            <br> <br>
          </ion-col>
        </ion-row>
      </ion-grid>     
    </div>
  </div>

  <ng-template #nodocs>
    <div>
          <div style="font-family:arial;font-size: 20px;text-align: center;"><br>No Documents</div>
    </div>
  </ng-template>

</ion-content>